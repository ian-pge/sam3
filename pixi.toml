[workspace]
name = "sam3"
version = "0.1.0"
description = "SAM3 (Segment Anything Model 3) implementation"
channels = ["conda-forge", "nvidia"]
platforms = ["linux-64"]

[tasks]
mask-cars = { cmd = "python scripts/mask_dataset.py", env = { PYTORCH_CUDA_ALLOC_CONF = "expandable_segments:True" } }

[dependencies]
python = "3.10.*"
pip = "*"
pytorch-gpu = ">=2.5"
numpy = ">=1.26,<2"
tqdm = "*"
ftfy = "==6.1.1"
regex = "*"
iopath = ">=0.1.10"
typing_extensions = "*"
huggingface_hub = "*"
pytest = "*"
jupyter = "*"
matplotlib = "*"
scikit-image = ">=0.25.2,<0.26"
scikit-learn = "*"
einops = "*"
triton = "*"
fvcore = "*"
hydra-core = "*"
omegaconf = "*"
pandas = "*"
psutil = "*"
pycocotools = "*"
submitit = "*"
torchmetrics = "*"

torchvision = ">=0.25.0,<0.26"
cuda-toolkit = ">=12.9.1,<13"
cuda-nvcc = ">=12.9.86,<13"
gcc_linux-64 = ">=14.3.0,<15"
gxx_linux-64 = ">=14.3.0,<15"
[system-requirements]
linux = "5.10"
cuda = "12.4"

[activation.env]
HF_HOME = "/workspace/.cache/huggingface"

[pypi-dependencies]
decord = "*"
fairscale = "*"
timm = ">=1.0.17"
sympy = "*"
hf_transfer = "*"
sam3 = { path = ".", editable = true }
hf-transfer = ">=0.1.9, <0.2"
